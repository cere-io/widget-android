<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#000000">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width shrink-to-fit=no">

    <style>
        html, body, #root {
            min-height: 100% !important;
            height: 100%;
            width: 100%
        }
    </style>

    <script type="text/javascript" src="::widgetUrl::"></script>
</head>
<body>
    <script type="text/javascript">

        console.log('Init Widget SDK');

        window.widget = {
          userId: '::userId::',
          appId: '::appId::',
          env: '::env::',
          sections: '::sections::'.split(',')
        };

        var t = setInterval(function() {
        if (window.CRBWidget && window.NativeStorage) {
          clearInterval(t);

          console.log('Check JS Bridge', window.WebViewJavascriptBridge);
          console.log('Check NativeStorage', window.NativeStorage);

          window.CRBWidget.init({
            uid: window.widget.userId,
            appId: window.widget.appId,
            env: window.widget.env,
            sections: window.widget.sections,

            processNonFungibleReward: function(params) {
              console.log('Not implemented');
            },

            setStorageItem: function(key, value) {
              return window.NativeStorage.setItem(key, value);
            },

            getStorageItem: function(key) {
              return window.NativeStorage.getItem(key);
            }
          });
        } else {
          console.log('Waiting for initialization');
        }
      }, 1000);
    </script>
</body>
</html>