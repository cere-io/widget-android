<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#000000">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width shrink-to-fit=no">

    <style>
        html, body, #root {
            min-height: 100% !important;
            height: 100%;
            width: 100%
        }
    </style>

    <script>
      var queryString = window.location.href.split('?')[1];

      var parts = queryString.split('&');
      var urlParamsObj = {};

      parts.forEach(function(val, i) {
        var param = val.split('=');
        urlParamsObj[param[0]] = param[1];
      });

      window.widget = urlParamsObj;


      var scriptPath = '/static/js/bundle.js';
      var src = 'https://widget-sdk.cere.io' + scriptPath;

      if (window.widget.env === 'local') {
        src = 'http://' + window.location.hostname + ':3011' + scriptPath;
      } else {
        if (window.widget.env !== 'production') {
          src = 'https://widget-sdk.' + window.widget.env + '.cere.io' + scriptPath;
        }
      }

      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.src = src;

      document.getElementsByTagName('head')[0].append(script);

      var t = setInterval(function() {
        if (window.CRBWidget) {
          clearInterval(t);

          window.CRBWidget.init({
            uid: window.widget.userId,
            appId: window.widget.appId,
            env: window.widget.env,
            sections: window.widget.sections.split(','),

            processNonFungibleReward: function(params) {
              console.log('Not implemented');
            },

            setStorageItem: function(key, value) {
              return window.NativeStorage.setItem(key, value);
            },

            getStorageItem: function(key) {
              return window.NativeStorage.getItem(key);
            }
          });
        }
      }, 500);

    </script>
</head>
<body>
    <div id="root"></div>
</body>
</html>